{"version":3,"sources":["components/FileDropper.tsx","constants.ts","axiosInstance.ts","components/Scenarios.tsx","components/FileUpload.tsx","components/FileUploader.tsx","hooks/useInterval.ts","components/ProcessHandler.tsx","components/Processes.tsx","components/Converter.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["FileDropper","onFileUpload","maxFileSize","filesLimit","dropzoneText","onChange","files","apply","CONSTANTS","API_BASE_URL","GENERIC_USER_KEY","axios","create","baseURL","headers","useStyles","makeStyles","theme","createStyles","root","margin","spacing","Scenarios","onSelectedScenarioChange","classes","useState","scenarios","setSenarios","selectedScenario","setSelectedScenario","updateScenario","useCallback","scenario","useEffect","axiosInstance","get","then","response","status","scenarioListJson","data","length","className","Grid","container","direction","justifyContent","alignItems","CircularProgress","Typography","FormControl","component","FormLabel","RadioGroup","name","value","id","event","selectedScenarioID","Number","parseInt","target","find","map","FormControlLabel","control","Radio","color","label","doneAvatar","backgroundColor","green","width","height","errorAvatar","red","FileUpload","file","onEnd","onValidUpload","progress","setProgress","isDone","setIsDone","error","setError","onProgress","stopPropagation","Math","round","loaded","total","call","formData","FormData","append","toString","post","onUploadProgress","statusText","model","uid","catch","message","Box","display","mr","LinearProgress","variant","minWidth","Tooltip","title","Avatar","Clear","Check","FileUploader","onFileUploadEnd","uploadedFiles","setUploadedFiles","modelIds","setModelIds","handleUploadEnd","upFiles","handleValidUpload","modelId","oldModelIds","nOldModelIds","slice","push","i","useInterval","callback","delay","savedCallback","useRef","current","setInterval","clearInterval","downloadButton","logAccordion","wordWrap","whiteSpace","wordBreak","ProcessHandler","modelUid","process","setProcess","processResult","setProcessResult","JSON","stringify","Object","fromEntries","item","Button","onClick","url","modelOutUid","a","document","createElement","href","download","body","appendChild","click","removeChild","size","disabled","Accordion","AccordionSummary","expandIcon","ExpandMore","AccordionDetails","log","replace","Processes","Converter","uploadedModelsIds","setUploadedModelsIds","paper","padding","steps","contentContainer","minHeight","backButton","marginRight","instructions","marginTop","marginBottom","App","activeStep","setActiveStep","setFiles","handleFileUpload","handleSelectedScenarioChange","style","Paper","Stepper","alternativeLabel","stepLabel","Step","StepLabel","stepIndex","getStepContent","previousStep","canProceedToNextStep","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3815f02c.chunk.js","sourcesContent":["import React from 'react';\r\nimport { DropzoneArea } from 'material-ui-dropzone';\r\n\r\ntype FileDropperProps = {\r\n  onFileUpload?: (files: File[]) => void;\r\n}\r\nconst FileDropper: React.FC<FileDropperProps> = ({\r\n  onFileUpload\r\n}) => {\r\n  \r\n  const handleChange = (files: File[]) => {\r\n    onFileUpload?.apply(null, [files]);\r\n  } \r\n  \r\n  return (\r\n    <DropzoneArea\r\n      maxFileSize={1e9}\r\n      filesLimit={10}\r\n      dropzoneText={\"Drag and drop a STEP file here or click\"}\r\n      onChange={handleChange}\r\n    />\r\n  );\r\n}\r\n\r\nexport default FileDropper;\r\n","export const CONSTANTS = {\r\n  \r\n  API_BASE_URL: 'https://magman.synology.me:4430/api',\r\n\r\n  GENERIC_USER_KEY: 1006,\r\n}\r\n","import axios from \"axios\";\r\nimport { CONSTANTS } from \"./constants\";\r\n\r\nexport default axios.create({\r\n  baseURL: CONSTANTS.API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n","import { CircularProgress, createStyles, FormControl, FormControlLabel, FormLabel, Grid, makeStyles, Radio, RadioGroup, Theme, Typography } from '@material-ui/core';\r\nimport React, { useState } from 'react';\r\nimport { useCallback } from 'react';\r\nimport { useEffect } from 'react';\r\nimport axiosInstance from '../axiosInstance';\r\nimport { Scenario } from '../models/scenario';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      margin: theme.spacing(1),\r\n    },\r\n  }),\r\n);\r\ntype ScenariosProps = {\r\n  onSelectedScenarioChange: (scenario: Scenario) => void;\r\n}\r\nconst Scenarios: React.FC<ScenariosProps> = ({\r\n  onSelectedScenarioChange,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [scenarios, setSenarios] = useState<Scenario[] | null>(null);\r\n  const [selectedScenario, setSelectedScenario] = useState<Scenario | null>(null);\r\n  \r\n  const updateScenario = useCallback((scenario: Scenario | null) => {\r\n    setSelectedScenario(scenario);\r\n    if (scenario !== null) {\r\n      onSelectedScenarioChange(scenario);\r\n    }\r\n  }, []);\r\n  \r\n  useEffect(() => {\r\n    axiosInstance.get('/scenarios').then((response) => {\r\n      if (response.status === 200) {\r\n        const scenarioListJson = response.data as Scenario[];\r\n        setSenarios(scenarioListJson);\r\n        if (scenarioListJson.length > 0) {\r\n          updateScenario(scenarioListJson[0]);\r\n        }\r\n      } else {\r\n        setSenarios(null);\r\n      }\r\n    })\r\n  }, [updateScenario]);\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const selectedScenarioID = Number.parseInt((event.target as HTMLInputElement).value);\r\n    updateScenario(scenarios?.find((scenario) => scenario.id === selectedScenarioID) ?? null);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n        {scenarios === null ?\r\n          <>\r\n            <CircularProgress />\r\n            <Typography>\r\n              Loading scenarios...\r\n            </Typography>\r\n          </>\r\n          :\r\n          <FormControl component=\"fieldset\">\r\n            <FormLabel component=\"legend\">\r\n              Scenarios\r\n            </FormLabel>\r\n            <RadioGroup \r\n              name=\"scenario\" \r\n              value={selectedScenario?.id ?? -1} \r\n              onChange={handleChange}\r\n            >\r\n              {scenarios !== null && scenarios.map((scenario) => \r\n                <FormControlLabel\r\n                  key={scenario.id}\r\n                  value={scenario.id}\r\n                  control={<Radio color=\"primary\" />}\r\n                  label={scenario.name}\r\n                />\r\n              )}\r\n            </RadioGroup>\r\n          </FormControl>\r\n        }\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Scenarios;\r\n","import { Avatar, Box, createStyles, Grid, LinearProgress, makeStyles, Theme, Tooltip, Typography } from '@material-ui/core';\r\nimport { green, red } from '@material-ui/core/colors';\r\nimport { Check as CheckIcon, Clear as ClearIcon } from '@material-ui/icons';\r\nimport React from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport axiosInstance from '../axiosInstance';\r\nimport { CONSTANTS } from '../constants';\r\nimport { Model } from '../models/model';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    doneAvatar: {\r\n      backgroundColor: green[500],\r\n      width: theme.spacing(3),\r\n      height: theme.spacing(3),\r\n    },\r\n    errorAvatar: {\r\n      backgroundColor: red[500],\r\n      width: theme.spacing(3),\r\n      height: theme.spacing(3),\r\n    },\r\n}));\r\ntype FileUploadProps = {\r\n  file: File;\r\n  onEnd?: () => void;\r\n  onValidUpload?: (modelId: string) => void;\r\n}\r\nconst FileUpload: React.FC<FileUploadProps> = ({\r\n  file,\r\n  onEnd,\r\n  onValidUpload,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [progress, setProgress] = useState(0);\r\n  const [isDone, setIsDone] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const onProgress = (event: ProgressEvent) => {\r\n    event.stopPropagation();\r\n    setProgress(Math.round(100 * event.loaded / event.total));\r\n    if (event.loaded === event.total) {\r\n      setIsDone(true);\r\n      onEnd?.call(null);\r\n    }\r\n  }\r\n\r\n  const getFeedbackAvatar = (): React.ReactNode => {\r\n    if (error !== null) {\r\n      return <Tooltip title={error}>\r\n        <Avatar className={classes.errorAvatar}>\r\n          <ClearIcon />\r\n        </Avatar>\r\n      </Tooltip>\r\n    }\r\n    if (isDone) {\r\n      return <Avatar className={classes.doneAvatar}>\r\n        <CheckIcon />\r\n      </Avatar>\r\n    }\r\n    return <Typography>\r\n      {progress} %\r\n    </Typography>\r\n  }\r\n\r\n  useEffect(() => {\r\n    const formData = new FormData();\r\n    formData.append('UserFK', CONSTANTS.GENERIC_USER_KEY.toString());\r\n    formData.append('CadModelFile', file);\r\n\r\n    axiosInstance\r\n      .post('/models', formData, {onUploadProgress: onProgress})\r\n      .then((response) => {\r\n        if (response.status !== 201) {\r\n          setError(`${response.status} ${response.statusText}`);\r\n        } else {\r\n          const model = response.data as Model;\r\n          onValidUpload?.call(null, model.uid);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        setError(error.message);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Grid\r\n        container\r\n        justifyContent=\"center\"\r\n        direction=\"row\"\r\n        alignItems=\"center\"\r\n      >\r\n        <Typography>\r\n          {file.name}\r\n        </Typography>\r\n      </Grid>\r\n      <Box\r\n        display=\"flex\" \r\n        alignItems=\"center\"\r\n      >\r\n        <Box\r\n          width=\"90%\"\r\n          mr={1}\r\n        >\r\n          <LinearProgress variant=\"determinate\" value={progress} />\r\n        </Box>\r\n        <Box minWidth={35}>\r\n          {getFeedbackAvatar()}\r\n        </Box>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FileUpload;\r\n","import { Typography } from '@material-ui/core';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport FileUpload from './FileUpload';\r\n\r\ntype FileUploaderProps = {\r\n  files: File[],\r\n  onFileUploadEnd?: (validModelsIds: string[]) => void;\r\n}\r\nconst FileUploader: React.FC<FileUploaderProps> = ({\r\n  files,\r\n  onFileUploadEnd,\r\n}) => {\r\n  const [uploadedFiles, setUploadedFiles] = useState(0);\r\n  const [modelIds, setModelIds] = useState<string[]>([]);\r\n\r\n  const handleUploadEnd = useCallback(() => {\r\n    setUploadedFiles((upFiles) => upFiles + 1);\r\n  }, []);\r\n\r\n  const handleValidUpload = (modelId: string) => {\r\n    setModelIds((oldModelIds) => {\r\n      // Inutile ?\r\n      const nOldModelIds = oldModelIds.slice();\r\n      nOldModelIds.push(modelId);\r\n      return nOldModelIds;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (modelIds.length >= files.length) {\r\n      onFileUploadEnd?.call(null, modelIds);\r\n    }\r\n  }, [uploadedFiles, modelIds]);\r\n\r\n  return (\r\n    <>\r\n      <Typography>\r\n        {uploadedFiles === files.length ? \r\n          `Upload done !` :\r\n          `Uploading files... (${uploadedFiles}/${files.length})`\r\n        }\r\n      </Typography>\r\n      {files.map((file, i) => \r\n        <FileUpload\r\n          key={i}\r\n          file={file}\r\n          onEnd={handleUploadEnd} \r\n          onValidUpload={handleValidUpload}\r\n        /> \r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FileUploader;\r\n","import { useEffect, useRef } from 'react'\r\n\r\nfunction useInterval(callback: () => void, delay: number | null): void {\r\n  const savedCallback = useRef(callback)\r\n\r\n  // Remember the latest callback if it changes.\r\n  useEffect(() => {\r\n    savedCallback.current = callback\r\n  }, [callback])\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    // Don't schedule if no delay is specified.\r\n    if (delay === null) {\r\n      return\r\n    }\r\n\r\n    const id = setInterval(() => savedCallback.current(), delay)\r\n\r\n    return () => clearInterval(id)\r\n  }, [delay])\r\n}\r\n\r\nexport default useInterval;\r\n","import { Accordion, AccordionDetails, AccordionSummary, Button, createStyles, Grid, makeStyles, Theme, Typography } from '@material-ui/core';\r\nimport { ExpandMore as ExpandMoreIcon } from '@material-ui/icons';\r\nimport React, { useEffect, useState } from 'react';\r\nimport axiosInstance from '../axiosInstance';\r\nimport { CONSTANTS } from '../constants';\r\nimport useInterval from '../hooks/useInterval';\r\nimport { Process } from '../models/process';\r\nimport { Scenario } from '../models/scenario';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    downloadButton: {\r\n      margin: theme.spacing(1),\r\n    },\r\n    logAccordion: {\r\n      wordWrap: \"break-word\",\r\n      whiteSpace: \"pre-wrap\",\r\n      wordBreak: \"break-all\",\r\n    },\r\n  }),\r\n);\r\n\r\ntype ProcessHandlerProps = {\r\n  modelUid: string;\r\n  scenario: Scenario;\r\n}\r\nconst ProcessHandler: React.FC<ProcessHandlerProps> = ({\r\n  modelUid,\r\n  scenario,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [process, setProcess] = useState<Process | null>(null);\r\n  // TODO : Gérer les erreurs (snackbar?)\r\n  //const [error, setError] = useState<string | null>(null);\r\n  const [processResult, setProcessResult] = useState<Process | null>(null);\r\n  const [isDone, setIsDone] = useState(false)\r\n\r\n  const handleDownload = () => {\r\n    if (processResult === null) \r\n      return;\r\n\r\n    const url = `${CONSTANTS.API_BASE_URL}/models/download/${processResult.modelOutUid}`;\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = url;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  }\r\n\r\n  useInterval(() => {\r\n    axiosInstance\r\n      .get(`/processes/${process?.uid ?? 0}`)\r\n      .then((response) => {\r\n        setProcessResult(response.data as Process);\r\n        if (processResult?.status == 2) {\r\n          setIsDone(true);\r\n        }\r\n      });\r\n  }, process !== null && !isDone ? 1000 : null);\r\n\r\n  useEffect(() => {\r\n    const formData = new FormData();\r\n    formData.append('modelInUid', modelUid.toString());\r\n    formData.append('scenarioFK', scenario.id.toString());\r\n    formData.append('userFK', CONSTANTS.GENERIC_USER_KEY.toString());\r\n\r\n    axiosInstance\r\n      .post('/processes', JSON.stringify(Object.fromEntries(formData)))\r\n      .then((response) => {\r\n        if (response.status !== 201) {\r\n          // setError(`${response.status} ${response.statusText}`);\r\n        } else {\r\n          setProcess(response.data as Process);\r\n        }\r\n      })\r\n      .catch(() => { // error parameter\r\n        // setError(error.message);\r\n      })\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justifyContent=\"space-between\"\r\n        alignItems=\"center\"\r\n      >\r\n        <Grid item>\r\n          <Typography>\r\n            Processing model #{modelUid} with scenario {scenario.name}\r\n          </Typography>\r\n        </Grid>\r\n          <Grid item>\r\n            <Button \r\n              className={classes.downloadButton}\r\n              onClick={handleDownload}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              disabled={!isDone}\r\n            >\r\n              {isDone ?\r\n              \"Download\"\r\n              :\r\n              \"Processing...\"\r\n              }\r\n            </Button>\r\n          </Grid>\r\n      </Grid>\r\n\r\n      <Accordion>\r\n        <AccordionSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          id={modelUid.toString()}\r\n        >\r\n          See Log\r\n        </AccordionSummary>\r\n        <AccordionDetails>\r\n          <pre className={classes.logAccordion}>\r\n            <code>\r\n              {processResult?.log.replace(/\\r/g, '\\n') ?? \"...\"}\r\n            </code>\r\n          </pre>\r\n        </AccordionDetails>\r\n      </Accordion>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProcessHandler;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Scenario } from '../models/scenario';\r\nimport ProcessHandler from './ProcessHandler';\r\n\r\ntype ProcessesProps = {\r\n  scenario: Scenario;\r\n  modelIds: string[];\r\n}\r\nconst Processes: React.FC<ProcessesProps> = ({\r\n  scenario,\r\n  modelIds,\r\n}) => {\r\n\r\n  return (\r\n    <>\r\n      <Typography>\r\n        Processes : \r\n      </Typography>\r\n      {(modelIds.map((modelId, i) =>\r\n        <ProcessHandler\r\n          key={i}\r\n          modelUid={modelId}\r\n          scenario={scenario}\r\n        />\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Processes;\r\n","import React, { useState } from 'react';\r\nimport { Scenario } from '../models/scenario';\r\nimport FileUploader from './FileUploader';\r\nimport Processes from './Processes';\r\n\r\ntype ConverterProps = {\r\n  files: File[];\r\n  scenario: Scenario;\r\n}\r\nconst Converter: React.FC<ConverterProps> = ({\r\n  files,\r\n  scenario,\r\n}) => {\r\n  const [uploadedModelsIds, setUploadedModelsIds] = useState<string[] | null>(null);\r\n\r\n  const handleFileUploadEnd = (modelIds: string[]) => {\r\n    setUploadedModelsIds(modelIds);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <FileUploader files={files} onFileUploadEnd={handleFileUploadEnd} />\r\n      {uploadedModelsIds !== null && uploadedModelsIds.length === files.length ? // Tous les fichiers uploadés doivent passer\r\n        <Processes\r\n          scenario={scenario}\r\n          modelIds={uploadedModelsIds}\r\n        /> :\r\n        null\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Converter;\r\n","import React, { useState } from 'react';\r\nimport './App.css';\r\nimport { Button, createStyles, Grid, Paper, makeStyles, Step, StepLabel, Stepper, Theme, Typography, CircularProgress } from '@material-ui/core';\r\nimport FileDropper from './components/FileDropper';\r\nimport Scenarios from './components/Scenarios';\r\nimport { Scenario } from './models/scenario';\r\nimport Converter from './components/Converter';\r\n\r\nconst getSteps = (): string[] => {\r\n  return ['Select CAD file(s)', 'Choose scenario', 'Get your files'];\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    paper: {\r\n      width: '50%',\r\n      minWidth: '50rem',\r\n      padding: theme.spacing(2),\r\n    },\r\n    steps: {\r\n      width: '90%',\r\n    },\r\n    contentContainer: {\r\n      minHeight: '20rem',\r\n      minWidth: '50rem',\r\n    },\r\n    backButton: {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n    instructions: {\r\n      marginTop: theme.spacing(1),\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n  }),\r\n);\r\n\r\nfunction App(): JSX.Element {\r\n  const classes = useStyles();\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [files, setFiles] = useState<File[] | null>(null);\r\n  const [selectedScenario, setSelectedScenario] = useState<Scenario | null>(null);\r\n  const steps = getSteps();\r\n\r\n  const handleNext = () => {\r\n    setActiveStep((previousStep) => previousStep + 1);\r\n  }\r\n\r\n  const handleReset = () => {\r\n    setActiveStep(0);\r\n  }\r\n\r\n  const handleFileUpload = (uploadedFiles: File[]) => {\r\n    setFiles(uploadedFiles);\r\n  }\r\n\r\n  const handleSelectedScenarioChange = (scenario: Scenario) => {\r\n    setSelectedScenario(scenario);\r\n  }\r\n\r\n  const canProceedToNextStep = (): boolean => {\r\n    switch (activeStep) {\r\n      case 0:\r\n        return (files !== null && files.length > 0);\r\n      case 1:\r\n        return selectedScenario !== null;\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  const getStepContent = (stepIndex: number): React.ReactNode => {\r\n    switch (stepIndex) {\r\n      case 0:\r\n        return <div>\r\n            <FileDropper onFileUpload={handleFileUpload} />\r\n            <ul>\r\n              {files !== null && files.map((file, i) => \r\n                <li key={i}>{file.name}</li>  \r\n              )}\r\n            </ul>\r\n          </div>\r\n      case 1:\r\n        return <Scenarios onSelectedScenarioChange={handleSelectedScenarioChange} />\r\n      case 2:\r\n        if (files !== null && selectedScenario !== null) {\r\n          return <Converter files={files} scenario={selectedScenario} />\r\n        }\r\n        return <CircularProgress />\r\n      default:\r\n        return <div>Unknown stepIndex</div>;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={0}\r\n      direction=\"column\"\r\n      alignItems=\"center\"\r\n      justifyContent=\"center\"\r\n      style={{ minHeight: '100vh' }}\r\n    >\r\n      <Paper className={classes.paper}>\r\n        <Grid\r\n          container\r\n          direction=\"column\"\r\n          alignItems=\"center\"\r\n          justifyContent=\"center\"\r\n        >\r\n          <Typography variant=\"h4\">\r\n            ASCAD\r\n          </Typography>\r\n          <Typography variant=\"h6\">\r\n            Simplify and Convert\r\n          </Typography>\r\n          <Stepper\r\n            className={classes.steps}\r\n            activeStep={activeStep}\r\n            alternativeLabel\r\n          >\r\n            {steps.map((stepLabel) =>\r\n              <Step key={stepLabel}>\r\n                <StepLabel>\r\n                  {stepLabel}  \r\n                </StepLabel>\r\n              </Step>\r\n            )}\r\n          </Stepper>\r\n          <div className={classes.contentContainer}>\r\n            {getStepContent(activeStep)}\r\n          </div>\r\n        </Grid>\r\n\r\n        <Grid\r\n          container\r\n          direction=\"row\"\r\n          justifyContent=\"flex-end\"\r\n          alignItems=\"center\"\r\n        >\r\n          {activeStep === steps.length ? (\r\n            <Button \r\n              onClick={handleReset}\r\n              size=\"large\"\r\n            >\r\n              Restart\r\n            </Button>\r\n          ) : (\r\n            activeStep !== steps.length - 1 ?\r\n              <div>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"large\"\r\n                  onClick={handleNext}\r\n                  disabled={!canProceedToNextStep()}\r\n                >\r\n                  Next\r\n                </Button>\r\n              </div>\r\n            : null)}\r\n        </Grid>\r\n      </Paper>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}